{% extends 'public/base.html' %}
{% load thumbnail %}
{% block title %}{{ title }}{% endblock %}

{% block css %}
{{ block.super }}
    <link rel="stylesheet" href="http://blueimp.github.io/Gallery/css/blueimp-gallery.min.css">
    <link rel="stylesheet" href="http://blueimp.github.io/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
{% endblock %}
{% block js %}
    <!-- The Bootstrap Image Gallery lightbox, should be a child element of the document body -->
    <div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
        <!-- The container for the modal slides -->
        <div class="slides"></div>
        <!-- Controls for the borderless lightbox -->
        <h3 class="title"></h3>
        <a class="prev">‹</a>
        <a class="next">›</a>
        <a class="close">×</a>
        <a class="play-pause"></a>
        <ol class="indicator"></ol>
        <!-- The modal dialog, which will be used to wrap the lightbox content -->
        <div class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" aria-hidden="true">&times;</button>
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body next"></div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default pull-left prev">
                            <i class="glyphicon glyphicon-chevron-left"></i>
                            Previous
                        </button>
                        <button type="button" class="btn btn-primary next">
                            Next
                            <i class="glyphicon glyphicon-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ block.super }}
    <script src="{{ STATIC_URL }}plugins/jquery.lazyload.min.js"></script>
    <script type="text/javascript">
        $(function() {
          $('#blueimp-gallery').data('useBootstrapModal', false);
          $("img.lazy").lazyload();
        });

    </script>
    <script src="{{ STATIC_URL }}plugins/blueimp/jquery.blueimp-gallery.min.js"></script>
    <script src="{{ STATIC_URL }}plugins/blueimp/bootstrap-image-gallery.min.js"></script>
{% endblock %}

{% block main %}
    {% spaceless %}
    <h2>{{ album }} {% if album.photographer %}<small>{{ album.photographer }}</small>{% endif %}</h2>
    {% if album.competition %}<p>{{ album.competition.get_full_name }}</p>{% endif %}
    {% if album.gallery_date %}<p>{{ album.gallery_date }}</p>{% endif %}
    <div class="row" id="links">
        {% for object in object_list %}
            <div class="col-xs-6 col-sm-4 col-lg-3">
                <a href="{{ object.image|thumbnail_url:'img' }}" title="{% firstof object.description object.filename %}" data-gallery>
                    <img data-original="{{ object.image|thumbnail_url:'thumb' }}" class="margin-bottom-10 lazy" />
                </a>
            </div>
        {% endfor %}
    </div>
    {{ block.super }}
    {% endspaceless %}
{% endblock %}